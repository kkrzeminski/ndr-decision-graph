[
  {
    "hash": "015456deb4822cba20eb9cb9efa32c6592c8c757",
    "short_hash": "015456d",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-23T16:05:40+01:00",
    "message": "docs: add diagnostic prompt for Issue #57 progress calculation bug\n\nAnalysis of progress showing 100% when only one tab is complete:\n\nFindings:\n- Backend implementation is CORRECT\n- ScreenProgressService properly aggregates across all tabs\n- Three progress levels available: Tab, Screen (aggregated), Project\n\nRoot cause (likely):\nFrontend uses tab-level endpoint instead of screen-level endpoint:\n- Wrong: GET /screens/{id}/tabs/{tabId}/progress (single tab)\n- Correct: GET /screens/{id}/progress (all tabs aggregated)\n\nScreen-level response includes:\n- completionPercentage: Overall screen completion\n- tabs[]: Per-tab breakdown for UI display\n- totalTabs/completedTabs: Tab completion summary\n\nRecommended action:\n1. Verify frontend endpoint usage via DevTools\n2. Update to use screen-level endpoint if needed\n3. Use tabs[] array for per-tab progress display\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "27b3a37187904c04a2aef9995f86cb1ec2d70e5c",
    "short_hash": "27b3a37",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-23T12:01:59+01:00",
    "message": "docs: add diagnostic prompt for Issue #36 approve-all bug\n\nComprehensive analysis of the \"Approve All\" button issue:\n\nAnalysis findings:\n- Backend implementation and tests are correct (7 tests pass)\n- Endpoint requires MANAGER or ADMIN role\n- Only rows with READY status can be approved\n\nPotential causes identified:\n1. Permission issue - user lacks MANAGER/ADMIN role\n2. No rows in READY status (workflow misunderstanding)\n3. Frontend calling wrong endpoint\n4. All rows already approved\n\nPrompt includes:\n- Debugging steps with SQL queries and curl commands\n- Requirements for improved error feedback\n- Enhanced BulkOperationResponse with message field\n- Testing scenarios for edge cases\n\nRecommendation: Diagnose actual failure mode before implementing\nchanges. Backend appears correct.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "603e1d7ffc7d37e27bba17c16aa3e3ee1e9691c2",
    "short_hash": "603e1d7",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-23T10:52:41+01:00",
    "message": "docs: add requirements prompt for Issue #58 optional KRS/REGON\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "038c25bb920835d4628f37815d25f4ce5e6f3b6f",
    "short_hash": "038c25b",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-23T10:15:02+01:00",
    "message": "feat: make KRS and REGON optional for manual customer creation (#58)\n\n- Add Liquibase migration to remove NOT NULL constraints from krs and regon columns\n- Update Customer entity to allow null values for krs and regon\n- Update CustomerRequest DTO to remove @NotBlank validation from optional fields\n- Update CustomerService to handle null/empty values:\n  - Normalize empty/whitespace strings to null\n  - Only check uniqueness for non-null values\n  - Trim whitespace from optional fields\n- Add 11 integration tests covering:\n  - Create customer with only name + NIP\n  - Create customer with partial fields\n  - Multiple customers without KRS/REGON\n  - Duplicate validation still works for non-null values\n  - Update to add/remove KRS later\n  - Empty string and whitespace handling\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 6
  },
  {
    "hash": "bef8b374ad1cdb69a685c7c0c2d34320cba32965",
    "short_hash": "bef8b37",
    "author": "Kris",
    "date": "2026-01-22T21:25:00+01:00",
    "message": "Merge pull request #9 from kkrzeminski/unassign-users-on-worker-change\n\nFix: remove assigned users when project workers change",
    "files_changed": 0
  },
  {
    "hash": "d2fff5f80d14f838527a69d7e60c71570873dcae",
    "short_hash": "d2fff5f",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-22T21:22:29+01:00",
    "message": "docs: add code reviews for PR #9 commits\n\nAdd detailed code reviews for each commit in the PR:\n- da15879: Screen user cleanup on worker change\n- 48bcda9: UserInfo structure for performedBy (breaking change)\n- e711bbd: Progress percentage fields\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 6
  },
  {
    "hash": "c63707b99aa1dedceaf8c07c77868d43a175208e",
    "short_hash": "c63707b",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-22T21:17:19+01:00",
    "message": "fix: update existing test for UserInfo performedBy change\n\nUpdate ProgressControllerIntegrationTest to use UserInfo.getName()\ninstead of comparing performedBy directly to a string.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "3658d4272ea43e9a8afdb12d399dfa587fea2c26",
    "short_hash": "3658d42",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-22T16:27:33+01:00",
    "message": "test: add integration tests for progress percentage fields\n\nVerifies that project detail and dashboard responses include new\nprogress percentage fields: readyPercentage, approvedPercentage,\nand approvedRows.\n\nTests commit e711bbd behavior including:\n- ProjectDetailResponse includes readyPercentage and approvedPercentage\n- Dashboard OverallProgress includes approvedRows and percentage fields\n- Percentages are within valid range (0-100)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 2
  },
  {
    "hash": "a938013996acaa519e9c8c6c2379f6f2919d2b8a",
    "short_hash": "a938013",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-22T16:26:06+01:00",
    "message": "test: add integration tests for ActivityLog performedBy UserInfo\n\nVerifies that activity log responses return performedBy as UserInfo\nobject with id, name, and email fields instead of separate userId\nand performedBy string fields.\n\nTests commit 48bcda9 behavior including:\n- UserInfo object structure in activity log response\n- Name fallback to username when firstName/lastName are null\n- Row-level activity log responses\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "65427cbd9c815f94317adad55ad01902945dbf57",
    "short_hash": "65427cb",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-22T16:24:34+01:00",
    "message": "test: add integration test for screen user cleanup on worker change\n\nVerifies that when a project worker's user is changed (same role,\ndifferent user), the old user's screen assignments are removed.\n\nTests commit da15879 behavior.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "e711bbdd19d522f3956db07bf9026cdb62d72128",
    "short_hash": "e711bbd",
    "author": "markrz12",
    "date": "2026-01-22T16:03:21+01:00",
    "message": "feat: update project progress display for /projects/{id} and /projects/dashboard",
    "files_changed": 4
  },
  {
    "hash": "48bcda904b5ee11b9ed71181d58228a649cbcb46",
    "short_hash": "48bcda9",
    "author": "markrz12",
    "date": "2026-01-22T14:01:40+01:00",
    "message": "Log user information - \"performedBy\" has now \"id\",\"name\",\"email\"",
    "files_changed": 4
  },
  {
    "hash": "da15879848e6e10a26fb8d84c943b7ddc8f86082",
    "short_hash": "da15879",
    "author": "markrz12",
    "date": "2026-01-22T12:12:15+01:00",
    "message": "Fix: remove assigned users when project workers change",
    "files_changed": 1
  },
  {
    "hash": "086fc0d8272fee05a2e3592b4509a204955b0d6a",
    "short_hash": "086fc0d",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-21T19:09:47+01:00",
    "message": "chore: remove database backup file from git tracking\n\n- Remove ndr_db_backup.dump from repository\n- Add to .gitignore to prevent future commits\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 2
  },
  {
    "hash": "6cf8400aba87a37b987cccc1fb3edf394a183d4b",
    "short_hash": "6cf8400",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-21T19:01:29+01:00",
    "message": "Merge branch 'Application' - Add Application Service with integration tests",
    "files_changed": 0
  },
  {
    "hash": "3b503b5b0d1ff061da76c326b0a81fff9dddcb7f",
    "short_hash": "3b503b5",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-21T19:01:18+01:00",
    "message": "test: add integration tests for ApplicationController\n\n- Add 20 comprehensive integration tests for Application (Wniosek) feature\n- Test GET/PUT application endpoints with template defaults\n- Test POST /ready and /draft status transitions\n- Test GET/DELETE signed documents endpoints\n- Test full status workflow: DRAFT ‚Üí READY_FOR_SIGNATURE ‚Üí DRAFT\n- Mock Office365Service for file upload operations\n- Apply spotless formatting to Application service files\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 6
  },
  {
    "hash": "8839f668719362813d6de08b52d11e8721bf8e86",
    "short_hash": "8839f66",
    "author": "markrz12",
    "date": "2026-01-21T14:51:48+01:00",
    "message": "Application Service",
    "files_changed": 23
  },
  {
    "hash": "6c234da4ff44ef2c1d8bb61f066317583cba796c",
    "short_hash": "6c234da",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-19T14:17:20+01:00",
    "message": "feat: add explicit type and dataType fields to cell response\n\nAdd type (ColumnType) and dataType (DataType) fields to Cell class\nso frontend doesn't need to resolve variants manually.\n\nCloses #56\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 2
  },
  {
    "hash": "6933d2892bead29aa32ea5ea0ca913a9d0422217",
    "short_hash": "6933d28",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-18T15:13:12+01:00",
    "message": "feat: implement variant column types for row-specific column overrides\n\n- Add ColumnVariant model for defining column attribute overrides\n- Add Column.variants field for optional list of variant definitions\n- Add Row.columnVariants map for row-specific variant selection\n- Implement getEffectiveColumn() in ProjectScreenService for variant resolution\n- Include columnVariants in getRows response for frontend rendering\n- Validate cell values against effective column's dataType\n\nVariants allow rows to use different column configurations (e.g., a YES_NO\ncolumn can become a COMMENT field for specific rows). No database schema\nchanges required - variants stored in template JSON.\n\nCloses: ndr-documents#41\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 7
  },
  {
    "hash": "99d3c6def4b2017b1acc89f6932feb3ef7f384ef",
    "short_hash": "99d3c6d",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-18T14:44:16+01:00",
    "message": "docs: add variant column types specification\n\n- Created prompts/029-variant-column-types.md with full implementation spec\n- Column-level variants list with row-level variantMap selection\n- No API changes required - backend resolves variants internally\n- Includes JSON examples, service layer changes, validation rules\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
    "files_changed": 2
  },
  {
    "hash": "7f58213aaac75c483a3b4486cdf551ff9af6e5bb",
    "short_hash": "7f58213",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-18T13:36:49+01:00",
    "message": "feat: add requirements and prompt preparation for variant column types\n\n- Introduced support for variant column metadata, enabling optional attributes that override all except 'id', 'title', and 'legalBasis'.\n- Updated `setCellValue` and `getCellValue` methods to account for variants.\n- Added documentation and prompt preparation for developers, ensuring alignment with issue ndr-documents#41.",
    "files_changed": 1
  },
  {
    "hash": "828e9ea589ff73dd7981319a10b2bc7e76fcbb9e",
    "short_hash": "828e9ea",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-03T18:16:41+01:00",
    "message": "feat: calculate totalRows from template metadata in progress calculation\n\nProgress Calculation Enhancement:\n- Changed totalRows calculation to use template metadata instead of RowStatus count\n- Now calculates: expanded template rows + custom rows = totalRows\n- More accurate progress percentages for untouched screens\n\nImplementation Details:\n- Added ProjectScreenService, RowExpansionService, CustomRowRepository dependencies\n- Created getTotalRowsFromTemplate() helper method with REQUIRES_NEW propagation\n- Handles row groups (WORKERS, EXTERNAL_COWORKERS) via RowExpansionService\n- Includes custom rows when customRows is enabled on tab\n- Fallback to touched rows count when template metadata unavailable\n- Independent transaction for metadata retrieval to avoid rollback issues\n\nBenefits:\n- Accurate totalRows even when no rows have been touched yet\n- Proper untouched row count (totalRows - touchedRows)\n- Handles dynamic row expansion from template groups\n- Backward compatible with missing/invalid template models\n\nKnown Issues:\n- Integration tests failing due to missing template models in test setup\n- Tests need proper template.model JSON with screen definitions\n- 11 integration tests affected (RowStatus, ScreenAggregate, Progress tests)\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "f17c40aedf3c19672399a0a3498d96c30f391b20",
    "short_hash": "f17c40a",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2026-01-03T17:41:08+01:00",
    "message": "feat: implement isManager check with single query for row comment deletion\n\nAccess Control Enhancement:\n- Implemented isManager method in RowCommentService\n- Added existsManagerByProjectIdAndUserId query to ProjectWorkerRepository\n- Uses single query to check if user has PARTNER or MANAGER role\n\nImplementation Details:\n- New @Query method checks for PARTNER or MANAGER role in ProjectWorker\n- Replaces TODO stub with efficient single-query implementation\n- Enables managers to delete any comment, not just their own\n- RowCommentService now depends on ProjectWorkerRepository\n\nTest Fixes:\n- Fixed InformationRequestPublicControllerIntegrationTest to include screenId\n- Added SCREEN_ID constant = \"ii.2.1\"\n- Resolved validation errors in public controller tests\n\nAll tests passing ‚úì\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 3
  },
  {
    "hash": "f0bb5508ab39f0532deed17e4bbfc70e6ff51dbe",
    "short_hash": "f0bb550",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-27T15:16:03+01:00",
    "message": "docs: add Office 365 implementation completion guide\n\nCreated comprehensive guide for finishing the remaining 10% of Office 365 integration.\n\nWhat's Covered:\n- Part 1: Office365Service Implementation (6 tasks)\n  * Task 1.1: GraphServiceClient initialization with Azure AD authentication\n  * Task 1.2: uploadFile() - File upload to SharePoint with error handling\n  * Task 1.3: deleteFile() - Soft delete (move to recycle bin)\n  * Task 1.4: ensureFolderExists() - Recursive folder hierarchy creation\n  * Task 1.5: getFolderUrl() - Get browser-accessible folder URLs\n  * Task 1.6: downloadFile() - File download (optional, for future use)\n\n- Part 2: Configuration and Testing\n  * Azure AD setup checklist\n  * Environment variables configuration\n  * Authentication verification with curl\n  * End-to-end file upload testing\n  * SharePoint verification steps\n\n- Part 3: Integration Tests (Optional)\n  * Office365ServiceTest template with 4 test cases\n  * Uses @EnabledIfEnvironmentVariable for CI/CD compatibility\n  * Cleanup after tests to avoid storage bloat\n\n- Part 4: Error Handling and Edge Cases\n  * Token expiration and refresh\n  * Network errors and retry logic\n  * File size limits and large file uploads (> 4 MB)\n  * Concurrent uploads and race conditions\n  * Special characters in file names\n\n- Part 5: Final Checklist\n  * Pre-completion verification (11 items)\n  * Production deployment checklist (9 items)\n  * Monitoring and alerting setup\n\nCurrent Status:\n- ‚úÖ 90% complete (database, services, controller, docs)\n- ‚è≥ 10% remaining (Office365Service TODO placeholders)\n\nEstimated Time: 11-18 hours\n\nEach task includes:\n- Current code (TODO placeholder)\n- Complete implementation with imports\n- Testing procedures\n- Expected outcomes\n\nThis guide enables any developer to complete the Office 365 integration\nwithout prior knowledge of Microsoft Graph API.\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 1
  },
  {
    "hash": "32b6e82ad5613f8a0205d049e4fc0a403bcdaf65",
    "short_hash": "32b6e82",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-27T14:59:30+01:00",
    "message": "docs: add comprehensive Azure AD and Office 365 configuration guide\n\nCreated detailed setup documentation for Microsoft Graph API integration:\n\nNew Documentation (docs/OFFICE365_SETUP.md):\n- Part 1: Azure AD App Registration\n  * Step-by-step app creation with screenshots guidance\n  * Client secret generation and management\n  * API permissions configuration (Files.ReadWrite.All, Sites.ReadWrite.All)\n  * Admin consent granting process\n- Part 2: SharePoint Site Configuration\n  * Methods to identify or create SharePoint site\n  * Getting SharePoint Site ID (Graph Explorer, PowerShell, URL methods)\n  * Root folder configuration and structure\n- Part 3: Application Configuration\n  * Environment variables setup (required and optional)\n  * Docker Compose configuration examples\n  * Kubernetes Secrets configuration for production\n- Part 4: Testing the Configuration\n  * Startup verification and logging\n  * Authentication testing with curl examples\n  * File upload API testing\n  * SharePoint verification steps\n- Part 5: Troubleshooting\n  * Common errors and solutions (tenant not found, invalid secret, etc.)\n  * Logging and debugging configuration\n  * Permission propagation issues\n- Part 6: Security Best Practices\n  * Client secret protection and rotation\n  * Principle of least privilege\n  * Activity monitoring and alerts\n  * Secret rotation procedure\n- Part 7: Advanced Configuration\n  * Managed Identity setup (Azure-hosted apps)\n  * Certificate authentication alternative\n  * Enhanced security options\n\nUpdated DEVELOPMENT.md:\n- Added Office 365 configuration section with environment variables\n- Quick setup checklist for Azure AD and SharePoint\n- Reference link to detailed OFFICE365_SETUP.md guide\n- Note about startup warnings if configuration incomplete\n\nBenefits:\n- Complete end-to-end setup instructions for Azure AD and SharePoint\n- Production-ready security guidance (secrets management, rotation)\n- Troubleshooting section for common configuration issues\n- Multiple authentication methods (client secret, managed identity, certificate)\n- Docker, Kubernetes, and production deployment examples\n- Testing and verification procedures\n\nThis guide enables administrators to configure Office 365 integration without\nprior Microsoft Graph API experience.\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 2
  },
  {
    "hash": "f5c4421af70bae2375a08e8c453b2b779819b34b",
    "short_hash": "f5c4421",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-27T14:52:56+01:00",
    "message": "feat: complete Office 365 file attachments REST API and documentation\n\nPart 2b/3 - REST Controller, Error Handlers, and Documentation:\n- Created FileAttachmentController with 10 REST endpoints\n  * Tab-level operations: upload, link, list, delete, get folder URL\n  * Row-level operations: upload, link, list, delete, get folder URL\n  * All endpoints require authentication via @PreAuthorize\n  * Row uploads enforce configurable file limits (default: 100 per row)\n- Added 5 exception handlers to GlobalExceptionHandler:\n  * FileUploadException (HTTP 400)\n  * FileSizeExceededException (HTTP 400)\n  * Office365ApiException (HTTP 502)\n  * FileAttachmentLimitExceededException (HTTP 400)\n  * DuplicateFileNameException (HTTP 409)\n  * All follow RFC 7807 Problem Details format\n- Updated ARCHITECTURE.md with comprehensive Office 365 integration documentation:\n  * Database schema and entity model\n  * SharePoint folder structure and file organization\n  * Microsoft Graph API integration architecture\n  * Business logic and validation rules\n  * Complete REST API endpoint reference with examples\n  * Error handling and custom exceptions\n  * Configuration requirements and dependencies\n  * Implementation status and pending work (Graph API placeholders)\n\nImplementation Notes:\n- SecurityConfig requires no changes (endpoints already protected via method security)\n- File operations follow project permission model (authenticated users with project access)\n- Base path: /api/projects/{projectId}/screens/{screenId}/tabs/{tabId}\n- Supports multipart file uploads and linking existing Office 365 files\n- Folder structure: {rootFolder}/{projectId}/Attachments/{screenId}/{tabId}[/rows/{rowId}]\n\nRelated:\n- Part 1/2: Database schema, entities, repository, exceptions (commit d26e6bd)\n- Part 2a/3: Services, config, DTOs, dependencies (commit 98aff27)\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 3
  },
  {
    "hash": "98aff2798dd8d1300748ba5d2b160778a0733c37",
    "short_hash": "98aff27",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-27T14:30:07+01:00",
    "message": "feat: add Office 365 integration services and config (WIP - part 2a/3)\n\nDependencies & Configuration:\n- Added Microsoft Graph SDK dependency (v6.24.0)\n- Added Azure Identity dependency (v1.15.2)\n- Added Office 365 configuration to application.yml\n- Configuration: tenant-id, client-id, client-secret, site-id, root-folder, max-file-size\n\nConfiguration Class:\n- Office365Config with @ConfigurationProperties\n- Environment variable support for all settings\n- Default root folder: \"NDR-Projects\"\n- Default max file size: 100 MB\n\nOffice 365 Service:\n- Office365Service with method signatures for Graph API integration\n- Methods: uploadFile, deleteFile, getFolderUrl, ensureFolderExists, downloadFile\n- Note: Actual Microsoft Graph API implementation marked as TODO\n- Requires Azure AD app registration and OAuth 2.0 setup\n\nDTOs:\n- FileAttachmentResponse - Complete file metadata response\n- LinkFileRequest - Request for linking existing Office 365 files\n\nBusiness Logic Service:\n- FileAttachmentService with complete business logic\n- Tab-level operations: uploadToTab, linkToTab, getTabFiles, getTabFolderUrl\n- Row-level operations: uploadToRow, linkToRow, getRowFiles, getRowFolderUrl\n- File operations: deleteFile (soft delete with Office 365 recycle bin)\n- Validation: file size, duplicate names, row file limits\n- Folder path building: {rootFolder}/{projectId}/Attachments/{screenId}/{tabId}[/rows/{rowId}]\n\nImplementation Status (8/15 tasks complete):\n- ‚úÖ Database schema and migrations\n- ‚úÖ Entities and enums\n- ‚úÖ Repository\n- ‚úÖ Custom exceptions\n- ‚úÖ Dependencies\n- ‚úÖ Configuration\n- ‚úÖ Office 365 service (structure)\n- ‚úÖ DTOs and business logic\n\nRemaining Work (part 2b/3):\n- REST controller with endpoints\n- Security configuration updates\n- Error handler registration\n- Documentation updates\n- Microsoft Graph API implementation (currently TODO)\n\nReference: prompts/013-office-365-integration.md\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 7
  },
  {
    "hash": "d26e6bd222aa86dcc063edc40f0d020213128095",
    "short_hash": "d26e6bd",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-27T14:23:37+01:00",
    "message": "feat: add Office 365 integration foundation (WIP - part 1/2)\n\nDatabase Schema:\n- Created file_attachments table with Liquibase migration\n- Supports tab-level and row-level file attachments\n- Includes soft delete, Office 365 metadata, and audit fields\n- Indexes for query performance (tab, row, user, deleted)\n- Check constraints for attachment context validation\n\nEntity Layer:\n- AttachmentContext enum (TAB, ROW)\n- FileAttachment entity with JPA annotations\n- Soft delete support and helper methods\n- Audit fields: createdAt, updatedAt, uploadedAt, deletedAt\n\nRepository Layer:\n- FileAttachmentRepository with custom JPQL queries\n- Methods: findTabFiles, findRowFiles, countRowFiles\n- Duplicate file name checking (no versioning support)\n- Soft delete filtering\n\nException Handling:\n- FileUploadException - General upload failures\n- FileSizeExceededException - File size limit (100 MB)\n- Office365ApiException - Microsoft Graph API errors\n- FileAttachmentLimitExceededException - Row file limit\n- DuplicateFileNameException - Prevent file versioning\n\nImplementation Notes:\n- File naming convention: (Row{n} {rowId})_|{originalFileName}\n- Folder structure: Pliki/{Kwestionariusz}/{fileName}\n- Cell-level attachments NOT supported (only tab/row)\n- Maximum 100 files per row (configurable)\n\nRemaining Work (Part 2/2):\n- Office 365 configuration (application.yml)\n- Microsoft Graph API integration (Office365Service)\n- DTOs (FileAttachmentRequest/Response)\n- Business logic (FileAttachmentService)\n- REST endpoints (FileAttachmentController)\n- Security configuration updates\n- Error handler registration\n- Documentation updates\n\nReference: prompts/013-office-365-integration.md\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 10
  },
  {
    "hash": "6a1eca83d67183a559a91a345e14a0d95436af08",
    "short_hash": "6a1eca8",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-27T14:07:15+01:00",
    "message": "docs: split CLAUDE.md into focused documentation files\n\nDocumentation Restructuring:\n- Split 1,400-line CLAUDE.md into 7 focused files\n- CLAUDE.md now 80 lines (overview + cross-references)\n- ARCHITECTURE.md: System architecture, database schema, features (570 lines)\n- DEVELOPMENT.md: Commands, configuration, API structure (230 lines)\n- DATABASE.md: Liquibase migrations workflow (140 lines)\n- ERROR_HANDLING.md: Exception handling guidelines (140 lines)\n- CODE_FORMATTING.md: Spotless configuration (130 lines)\n- DECISION_GRAPH.md: Decision tracking workflow (120 lines)\n\nBenefits:\n- Improved performance and reduced context usage\n- Better organization with single-purpose files\n- Easy navigation via markdown cross-references\n- Maintainability - updates target specific areas\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 7
  },
  {
    "hash": "577b68746eb8b5f8e15379802a69ef294b164ac3",
    "short_hash": "577b687",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-20T17:57:50+01:00",
    "message": "feat: add predefined values (quick-fill) for TEXT fields\n\nImplemented suggestion-based quick-fill for TEXT columns to speed up\ndata entry while maintaining free-text flexibility.\n\nBackend Changes:\n- Added `options` field to Cell model (List<String>)\n- Automatically deserialized from template JSON via Jackson\n- No validation logic - any text value accepted (suggestions only)\n- No database changes required (template-only feature)\n\nFeature Design:\n- TEXT columns can define predefined option lists in template\n- Users can select from suggestions OR type custom text\n- Row-specific options (different rows can have different suggestions)\n- Optional field - backward compatible with existing templates\n- Combines convenience of dropdowns with flexibility of free text\n\nTemplate Example:\n```json\n{\n  \"columnId\": \"remarks\",\n  \"type\": \"TEXT\",\n  \"options\": [\"No issues\", \"Requires review\", \"Not applicable\"]\n}\n```\n\nUse Cases:\n- Audit remarks with common responses (~10x faster data entry)\n- Risk assessment justifications\n- Review comments and status notes\n- Questionnaires with repetitive answers (e.g., 40/50 answers = \"N/A\")\n\nKey Difference from ENUM:\n- ENUM: Restricts to predefined values only (validation enforced)\n- TEXT with options: Suggestions for convenience, any text allowed\n\nDocumentation:\n- Updated CLAUDE.md with feature description and examples\n- Created comprehensive specification: prompts/019-predefined-values-for-text-fields.md\n- Includes frontend implementation guidelines and UI/UX best practices\n\nFrontend Work Required:\n- Build suggestion picker component (dropdown/autocomplete)\n- Integrate with TEXT input and TEXTAREA controls\n- Keyboard navigation and accessibility support\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 4
  },
  {
    "hash": "a57be606a3253df785dc97bb6a2b200730708fca",
    "short_hash": "a57be60",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-20T17:41:36+01:00",
    "message": "feat: add screen user assignment feature\n\nImplemented multi-user assignment to screens to enable team collaboration\nand responsibility tracking.\n\nDatabase:\n- Created screen_user table with many-to-many relationship\n- Unique constraint: project_id + screen_id + user_id\n- Foreign keys: project, user, assigned_by with cascade/set null\n- Indexes for efficient queries on project/screen, user, and timestamp\n\nBackend:\n- ScreenUser entity with audit fields (assignedAt, assignedBy)\n- DTOs: UpdateScreenUsersRequest, ScreenUserResponse, ScreenAssignmentResponse\n- ScreenUserRepository with custom JPQL queries\n- ScreenUserService with validation (users must be project workers)\n- ScreenUserController with 3 REST endpoints\n\nEndpoints:\n- GET /projects/{id}/screens/{screenId}/assignedUsers - Get assigned users\n- POST /projects/{id}/screens/{screenId}/assignedUsers - Update assignments (ADMIN/MANAGER)\n- GET /users/{userId}/screens - Get user's assigned screens (sorted by recent)\n\nFeatures:\n- Replaces entire assignment list on update\n- Automatic duplicate removal\n- Validation: all users must be project workers\n- Audit trail: tracks who assigned and when\n- Empty list support to remove all assignments\n- Cascade delete when project or user deleted\n\nDocumentation:\n- Updated CLAUDE.md with entity and endpoint documentation\n- Created comprehensive specification in prompts/018-screen-workers-management.md\n- Included refinement document with product requirements\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 13
  },
  {
    "hash": "bb227970cb596179a8e811a011e034227912da8a",
    "short_hash": "bb22797",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-19T20:15:57+01:00",
    "message": "doc: expand textarea feature specification document\n\nSpecification Enhancements:\n- Expanded from 3-line brief to comprehensive 375-line specification\n- Added problem statement and solution overview\n- Documented requirements and technical design\n- Included detailed user stories\n\nContent Added:\n- Overview of TEXTAREA UI control purpose\n- Problem statement: poor UX for long-form text in single-line inputs\n- Requirements: enum extension, column configuration, UI behavior\n- Technical design: backend changes, frontend reference implementation\n- 4 detailed template examples (description, remarks, comments, mixed)\n- 4 use case scenarios (audit notes, explanations, descriptions, feedback)\n\nImplementation Details:\n- Phase 1: Backend enhancement (completed)\n- Phase 2: Documentation (completed)\n- Phase 3: Frontend implementation (future work)\n- Validation rules for template and runtime\n- Acceptance criteria with checkboxes\n- Design decisions with rationale\n\nExamples Provided:\n- Description field with placeholder\n- Remarks field for additional notes\n- Comments field with required/readonly options\n- Mixed column types showing TEXTAREA alongside RADIO/DROPDOWN\n- Audit notes scenario\n- Explanation fields for variance\n- Long description use cases\n- Feedback collection\n\nDesign Decisions Documented:\n- Enum value naming: \"textarea\" (lowercase) for consistency\n- Column type support: TEXT only (not ENUM)\n- No schema changes needed (uses existing uiControl field)\n- Default behavior: single-line input if uiControl not specified\n- Backward compatibility maintained\n\nBenefits & Limitations:\n- Better UX for multi-line content\n- Improved readability and editing\n- No breaking changes\n- Frontend implementation required\n- Plain text only (no rich text in Phase 1)\n\nFuture Enhancements:\n- Auto-resize textarea based on content\n- Character counter when approaching limit\n- Rich text support (bold, italic, lists)\n- Markdown formatting support\n- Spell check integration\n- Template snippets for common responses\n\nReferences:\n- UIControl enum location\n- Column model structure\n- Related features in CLAUDE.md\n- Existing UI controls (RADIO, DROPDOWN)\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 3
  },
  {
    "hash": "5570515a61636d607b4f5a2e26c100042a989d22",
    "short_hash": "5570515",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-19T20:11:34+01:00",
    "message": "feat: add TEXTAREA UI control for TEXT columns\n\nUI Control Enhancement:\n- Added TEXTAREA to UIControl enum for multi-line text input\n- Extended uiControl field usage to TEXT columns (previously ENUM only)\n- UI can now render TEXT columns as textarea for long-form content\n\nAvailable UI Controls:\n- RADIO: For ENUM columns with 2-5 options\n- DROPDOWN: For ENUM columns with many options\n- TEXTAREA: For TEXT columns requiring multi-line input\n\nUse Cases:\n- Long descriptions or explanations\n- Comments and remarks fields\n- Any text content that exceeds single-line input\n- Better UX for fields expecting paragraphs of text\n\nTemplate Configuration:\n```json\n{\n  \"id\": \"description\",\n  \"type\": \"TEXT\",\n  \"dataType\": \"STRING\",\n  \"uiControl\": \"textarea\",\n  \"placeholder\": \"Enter detailed description...\"\n}\n```\n\nBackend Implementation:\n- UIControl enum: Added TEXTAREA(\"textarea\")\n- Column model: Updated documentation for uiControl field\n- No database schema changes required\n- Backward compatible - existing templates work unchanged\n\nDocumentation:\n- Updated CLAUDE.md with TEXTAREA examples\n- Added examples for both ENUM and TEXT columns\n- Documented use cases and best practices\n\nTesting:\n- All unit tests passing\n- Build successful\n- No breaking changes to existing functionality\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 6
  },
  {
    "hash": "60ada9cbee2e4774e7195dec4341ac479d9332ba",
    "short_hash": "60ada9c",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-19T19:49:04+01:00",
    "message": "feat: implement default cell values feature with materialization\n\nTemplate Configuration:\n- Added `defaultValue` field to Cell model for cell-level defaults\n- Added `defaultCellValue` field to Row model for row-level defaults\n- Cell-level defaults override row-level defaults (priority system)\n\nDisplay & API:\n- Enhanced RowsResponse to include `defaultValue` and `isDefault` fields\n- GET /rows returns default value information for all cells\n- `isDefault: true` when cell uses default, `false` when user-set\n\nMaterialization Logic:\n- Defaults are NOT stored in database until row is marked READY\n- markRowReady() calls materializeDefaults() to persist defaults\n- Bulk readyAll() operation materializes defaults for all affected rows\n- Materialization skips cells that already have user values\n- Parses template JSON directly to avoid transaction conflicts\n\nBackend Implementation:\n- ProjectScreenService.getRows(): Merges defaults with database values\n- ProjectScreenService.findDefaultValueInTemplateRow(): Extracts defaults with priority\n- RowStatusService.materializeDefaults(): Saves defaults to database\n- RowStatusService.markReady(): Enhanced to materialize before setting status\n- RowStatusService.readyAll(): Enhanced for bulk materialization\n\nUse Cases:\n- Reduces repetitive data entry in questionnaires\n- Supports scenarios where 80%+ of answers are the same (e.g., \"No\", \"N/A\")\n- Users can override defaults immediately (saves to database)\n- Works with all column types: TEXT, NUMBER, ENUM, DATE, BOOLEAN\n\nTesting:\n- All unit tests passing\n- All RowStatus and ScreenAggregate integration tests passing\n- Transaction conflicts resolved by parsing template directly\n- Custom rows correctly excluded from default materialization\n\nDocumentation:\n- Added comprehensive documentation in CLAUDE.md\n- Created detailed specification in prompts/015-default-cell-value.md\n- Included examples for cell-level and row-level defaults\n- Documented materialization behavior and API responses\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 7
  },
  {
    "hash": "3d541ebc6074a6c0632b5db289ef02f302246ca5",
    "short_hash": "3d541eb",
    "author": "Krzysztof Krzemi≈Ñski",
    "date": "2025-12-16T22:13:22+01:00",
    "message": "feat: implement tab-level remarks feature\n\nAdd configurable remarks/notes textarea field at tab level for collaborative annotations.\nUsers can add free-text observations, notes, or comments about tab content when enabled\nin template configuration.\n\nDatabase Layer:\n- Create tab_remarks table via Liquibase migration\n- Unique constraint on (project_id, screen_id, tab_id)\n- Tracks remarks content, last updated by user, and timestamp\n- Foreign keys to projects and users with cascade/set null policies\n\nEntity & Model:\n- TabRemarks entity with JPA mappings\n- RemarksConfig model for template configuration (enabled, label, placeholder, maxLength)\n- Updated Tab model to include optional remarks field\n\nDTOs:\n- TabRemarksDTO: Full remarks response with configuration\n- UserSummaryDTO: User information summary\n- UpdateRemarksRequest: Request body for updates\n- RemarksData: Simplified remarks included in rows response\n\nRepository:\n- TabRemarksRepository with find and delete operations\n\nService Layer:\n- TabRemarksService with getTabRemarks() and updateTabRemarks()\n- Template parsing to extract RemarksConfig\n- Content length validation against template maxLength\n- Audit trail tracking (last updated by/at)\n\nController:\n- GET /api/projects/{projectId}/screens/{screenId}/tabs/{tabId}/remarks\n- PUT /api/projects/{projectId}/screens/{screenId}/tabs/{tabId}/remarks\n- Authentication required, proper Swagger documentation\n\nIntegration:\n- Updated ProjectScreenService to include remarks in GET /rows response\n- Modified RowsResponse DTO to include optional remarks field\n- Auto-includes remarks data when enabled in template\n\nKey Features:\n- Template-driven configuration per tab\n- Configurable labels and placeholders (multi-language support)\n- Validation: maxLength enforced (default 5000, max 50000 characters)\n- Audit trail: tracks who last updated and when\n- Security: requires authentication via existing framework\n\nTemplate Configuration Example:\n{\n  \"remarks\": {\n    \"enabled\": true,\n    \"label\": \"Remarks\",\n    \"placeholder\": \"Add your notes...\",\n    \"maxLength\": 5000\n  }\n}\n\nImplements: prompts/014-tab-level-summary.md\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>",
    "files_changed": 14
  }
]